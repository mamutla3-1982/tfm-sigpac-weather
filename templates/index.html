<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SIGPAC Weather</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">

    <!-- Estilos generales -->
    <link rel="stylesheet" href="/static/css/style.css">

</head>
<body>

<!-- HEADER -->
<header class="main-header">
    <div class="logo"> SIGPAC Weather</div>
    <nav>
        <button class="nav-btn" onclick="UI.showHome()">Inicio</button>
        <button class="nav-btn" id="loginBtn" onclick="UI.showLogin()">Iniciar sesi贸n</button>
        <button class="nav-btn" id="registerBtn" onclick="UI.showRegister()">Crear cuenta</button>
        <button class="nav-btn" id="logoutBtn" onclick="Auth.logout()" style="display:none;">Cerrar sesi贸n</button>
    </nav>
</header>

<!-- VISTAS -->
<div id="view-home" class="view active home-view">
    <div class="home-overlay">
        <h1>Meteorolog铆a Aplicada a la Agricultura</h1>
        <p>Consulta lluvias de AEMET, dibuja tus parcelas en SIGPAC y guarda su historial.</p>
        <button class="primary-btn" onclick="UI.showRegister()">Comenzar</button>
    </div>
</div>

<div id="view-login" class="view auth-view">
    <div class="auth-box">
        <h2>Iniciar sesi贸n</h2>
        <input id="login-user" type="text" placeholder="Usuario o correo">
        <input id="login-pass" type="password" placeholder="Contrase帽a">
        <button onclick="Auth.login()">Entrar</button>
    </div>
</div>

<div id="view-register" class="view auth-view">
    <div class="auth-box">
        <h2>Crear cuenta</h2>
        <input id="reg-user" type="text" placeholder="Nombre de usuario">
        <input id="reg-email" type="email" placeholder="Correo electr贸nico">
        <input id="reg-pass" type="password" placeholder="Contrase帽a">
        <input id="reg-pass2" type="password" placeholder="Confirmar contrase帽a">
        <button onclick="Auth.register()">Registrarse</button>
    </div>
</div>

<div id="view-app" class="view app-view">
    <div class="sidebar">

        <h2>Tus Parcelas</h2>
        <div id="parcelas-list" class="parcelas-list">
            <!-- Tarjetas din谩micas -->
        </div>

        <button class="primary-btn" onclick="Parcelas.startDrawing()">Dibujar nueva parcela</button>
    </div>

    <div class="map-container">
        <div id="map"></div>
    </div>

    <div class="info-panel">
        <h3 id="parcela-nombre">Informaci贸n</h3>

        <p><strong>Provincia:</strong> <span id="inf-provincia"></span></p>
        <p><strong>Municipio:</strong> <span id="inf-municipio"></span></p>
        <p><strong>Recinto:</strong> <span id="inf-recinto"></span></p>
        <p><strong>Superficie:</strong> <span id="inf-area"></span> ha</p>

        <h3>Lluvia</h3>
        <canvas id="grafico-diario"></canvas>
        <canvas id="grafico-mensual"></canvas>
        <canvas id="grafico-anual"></canvas>
        <canvas id="grafico-historico"></canvas>
    </div>
</div>

<!-- SCRIPTS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="/static/js/ui.js"></script>
<script src="/static/js/auth.js"></script>
<script src="/static/js/mapa.js"></script>
<script src="/static/js/sigpac.js"></script>
<script src="/static/js/parcelas.js"></script>
<script src="/static/js/aemet.js"></script>

</body>
</html>
``
